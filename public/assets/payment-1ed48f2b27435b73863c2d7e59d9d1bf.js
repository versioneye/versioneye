function render_loading_invoice(t,e){var n=_.template(jQuery("#loading_invoice_template").html());jQuery(t).html(n(e))}function render_empty_invoice(t,e){var n=_.template(jQuery("#empty_invoice_template").html());jQuery(t).html(n(e))}function render_invoice_table(t,e){var n=_.template(jQuery("#invoice_table_template").html());jQuery(t).html(n(e))}function render_invoice_row(t,e){var n=_.template(jQuery("#invoice_row_template").html());jQuery(t).append(n({invoice:e}))}function render_payment_history(t,e){if(0==e.length)console.debug("Rendering empty invoices"),render_empty_invoice(t,{});else{var n="#invoice_table > tbody";console.debug("Rendering table"),render_invoice_table(t,{}),_.each(e,function(t){render_invoice_row(n,t)})}}function render_fail_invoice(t){var e=_.template(jQuery("#fail_invoice_template").html());jQuery(t).html(e({message:"Can not read payment history from Payment service"}))}jQuery(document).ready(function(){if(jQuery("#payment_history").length){console.debug("Going to render payment history..."),_.templateSettings={interpolate:/\{\{\=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g};var t="#payment_history";render_loading_invoice(t);var e=jQuery.getJSON("/settings/payments.json");e.done(function(e,n){console.debug("Got invoices: "+n),render_payment_history(t,e)}),e.fail(function(e,n){console.debug("Failed invoices: "+n),render_fail_invoice(t,e)})}});