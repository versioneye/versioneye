(function(){!function(e){"use strict";e.fn.extend({maxlength:function(t,n){function r(e){var t=e.val(),n=t.match(/\n/g),r=n?n.length:0;return e.val().length+r}function i(e,n,i){var o=!0;return!t.alwaysShow&&i-r(e)>n&&(o=!1),o}function o(e,t){var n=t-r(e);return n}function a(e){e.css({display:"block"})}function s(e){e.css({display:"none"})}function u(e,n){var r="";return t.preText&&(r+=t.preText),t.showMaxLength?r=r+n+t.separator+e:r+=n,t.postText&&(r+=t.postText),r}function l(e,n,r,o){o.html(u(r,e)),e>0?i(n,t.threshold,r)?a(o.removeClass(t.limitReachedClass).addClass(t.warningClass)):s(o):a(o.removeClass(t.warningClass).addClass(t.limitReachedClass))}function c(t){var n=t[0];return e.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},t.offset())}function p(e,n){var r=c(e),i=e.outerWidth(),o=n.outerWidth(),a=n.width(),s=n.height();switch(t.placement){case"bottom":n.css({top:r.top+r.height,left:r.left+r.width/2-a/2});break;case"top":n.css({top:r.top-s,left:r.left+r.width/2-a/2});break;case"left":n.css({top:r.top+r.height/2-s/2,left:r.left-a});break;case"right":n.css({top:r.top+r.height/2-s/2,left:r.left+r.width});break;case"bottom-right":n.css({top:r.top+r.height,left:r.left+r.width});break;case"top-right":n.css({top:r.top-s,left:r.left+i});break;case"top-left":n.css({top:r.top-s,left:r.left-o});break;case"bottom-left":n.css({top:r.top+e.outerHeight(),left:r.left-o});break;case"centered-right":n.css({top:r.top+s/2,left:r.left+i-o-3})}}function d(e){return e.attr("maxlength")||e.attr("size")}var f=e("body"),h={alwaysShow:!1,threshold:10,warningClass:"badge badge-success",limitReachedClass:"badge badge-important",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",validate:!1};return e.isFunction(t)&&!n&&(n=t,t={}),t=e.extend(h,t),this.each(function(){var n=e(this),r=d(n),i=e("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:999}).html(u(r,"0"));n.is("textarea")&&(n.data("maxlenghtsizex",n.outerWidth()),n.data("maxlenghtsizey",n.outerHeight()),n.mouseup(function(){(n.outerWidth()!==n.data("maxlenghtsizex")||n.outerHeight()!==n.data("maxlenghtsizey"))&&p(n,i),n.data("maxlenghtsizex",n.outerWidth()),n.data("maxlenghtsizey",n.outerHeight())})),f.append(i),n.focus(function(){var e=o(n,d(n));l(e,n,r,i),p(n,i)}),n.blur(function(){i.css("display","none")}),n.keyup(function(){var e=o(n,d(n)),a=!0;return t.validate&&0>e?a=!1:l(e,n,r,i),a}),n.keydown(function(e){var t=o(n,d(n));return 0>=t&&46!==e.keyCode&&8!==e.keyCode?!1:void 0})})}})}(jQuery)}).call(this);