/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};!function(e,t){function n(e){return String(null===e||void 0===e?"":e)}function r(e){return e=n(e),l.test(e)?e.replace(i,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(){return""},v:r,t:n,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(!c(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;return c(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";return r&&!o?!1:(r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o)},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}return a?(r||"function"!=typeof i||(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],u=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(u=e.call(s),"function"==typeof u){if(r)return!0;if(this.c)return this.ho(u,s,n,this.text.substring(i,o),a)}return u},lv:function(e,t,r){var i=t[t.length-1],o=e.call(i);return"function"==typeof o&&(o=n(o.call(i)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(i,r):n(o)}};var i=/&/g,o=/</g,a=/>/g,s=/\'/g,u=/\"/g,l=/[&<>\"\']/,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),function(e){function t(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function n(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function r(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;i>r;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function i(e,t,n,r){for(var s=[],u=null,l=null;e.length>0;)if(l=e.shift(),"#"==l.tag||"^"==l.tag||o(l,r))n.push(l),l.nodes=i(e,l.tag,n,r),s.push(l);else{if("/"==l.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+l.n);if(u=n.pop(),l.n!=u.n&&!a(l.n,u.n,r))throw new Error("Nesting error: "+u.n+" vs. "+l.n);return u.end=l.i,s}s.push(l)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return s}function o(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n].o==e.n)return e.tag="#",!0}function a(e,t,n){for(var r=0,i=n.length;i>r;r++)if(n[r].c==e&&n[r].o==t)return!0}function s(e){return e.replace(x,"\\\\").replace(v,'\\"').replace(y,"\\n").replace(b,"\\r")}function u(e){return~e.indexOf(".")?"d":"f"}function l(e){for(var t="",n=0,r=e.length;r>n;n++){var i=e[n].tag;"#"==i?t+=c(e[n].nodes,e[n].n,u(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):"^"==i?t+=p(e[n].nodes,e[n].n,u(e[n].n)):"<"==i||">"==i?t+=f(e[n]):"{"==i||"&"==i?t+=h(e[n].n,u(e[n].n)):"\n"==i?t+=m('"\\n"'+(e.length-1==n?"":" + i")):"_v"==i?t+=d(e[n].n,u(e[n].n)):void 0===i&&(t+=m('"'+s(e[n])+'"'))}return t}function c(e,t,n,r,i,o){return"if(_.s(_."+n+'("'+s(t)+'",c,p,1),c,p,0,'+r+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+l(e)+"});c.pop();}"}function p(e,t,n){return"if(!_.s(_."+n+'("'+s(t)+'",c,p,1),c,p,1,0,0,"")){'+l(e)+"};"}function f(e){return'_.b(_.rp("'+s(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function h(e,t){return"_.b(_.t(_."+t+'("'+s(e)+'",c,p,0)));'}function d(e,t){return"_.b(_.v(_."+t+'("'+s(e)+'",c,p,0)));'}function m(e){return"_.b("+e+");"}var g=/\S/,v=/\"/g,y=/\n/g,b=/\r/g,x=/\\/g,w={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(e,i){function o(){v.length>0&&(y.push(new String(v)),v="")}function a(){for(var e=!0,t=C;t<y.length;t++)if(e=y[t].tag&&w[y[t].tag]<w._v||!y[t].tag&&null===y[t].match(g),!e)return!1;return e}function s(e,t){if(o(),e&&a())for(var n,r=C;r<y.length;r++)y[r].tag||((n=y[r+1])&&">"==n.tag&&(n.indent=y[r].toString()),y.splice(r,1));else t||y.push({tag:"\n"});b=!1,C=y.length}function u(e,t){var r="="+S,i=e.indexOf(r,t),o=n(e.substring(e.indexOf("=",t)+1,i)).split(" ");return E=o[0],S=o[1],i+r.length-1}var l=e.length,c=0,p=1,f=2,h=c,d=null,m=null,v="",y=[],b=!1,x=0,C=0,E="{{",S="}}";for(i&&(i=i.split(" "),E=i[0],S=i[1]),x=0;l>x;x++)h==c?r(E,e,x)?(--x,o(),h=p):"\n"==e.charAt(x)?s(b):v+=e.charAt(x):h==p?(x+=E.length-1,m=w[e.charAt(x+1)],d=m?e.charAt(x+1):"_v","="==d?(x=u(e,x),h=c):(m&&x++,h=f),b=x):r(S,e,x)?(y.push({tag:d,n:n(v),otag:E,ctag:S,i:"/"==d?b-S.length:x+E.length}),v="",x+=S.length-1,h=c,"{"==d&&("}}"==S?x++:t(y[y.length-1]))):v+=e.charAt(x);return s(b,!0),y},e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+l(t)+"return _.fl();";return r.asString?"function(c,p,i){"+i+";}":new e.Template(new Function("c","p","i",i),n,e,r)},e.parse=function(e,t,n){return n=n||{},i(e,"",[],n.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];return r?r:(r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r)}}("undefined"!=typeof exports?exports:Hogan);