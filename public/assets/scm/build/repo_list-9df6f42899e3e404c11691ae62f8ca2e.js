var repoListInterval=0,store=[],RepoList=React.createClass({displayName:"RepoList",loadReposFromServer:function(){$.ajax({url:this.props.url,dataType:"json",success:function(e){something_changed=e.repos.length!=store.length||e.task_status!=this.state.task_status,something_changed&&(store=e.repos,this.setState({data:e.repos,list_size:e.repos.length,task_status:e.task_status})),"done"==e.task_status&&clearInterval(repoListInterval)}.bind(this),error:function(e,t,n){console.error(this.props.url,t,n.toString())}.bind(this)})},getInitialState:function(){return{data:[],text:"",list_size:0,task_status:""}},componentWillMount:function(){this.loadReposFromServer(),repoListInterval=setInterval(this.loadReposFromServer,this.props.pollInterval)},onChange:function(e){filtered=[],data=store,count=0;for(var t in data)data.hasOwnProperty(t)&&-1!=data[t].fullname.toLowerCase().indexOf(e.target.value.toLowerCase())&&(filtered[t]=data[t],count+=1);this.setState({data:filtered,list_size:count,text:e.target.value})},render:function(){var e=this.props.scm,t="/user/"+this.props.scm+"/clear",n=this.state.data.map(function(t){return ScmRepo({data:t,scm:e})});return React.DOM.div(null,React.DOM.div(null,React.DOM.input({type:"text",id:"filter_input",value:this.state.text,onChange:this.onChange})),React.DOM.div({className:"scm_meta"},this.state.list_size," Repositories - ",React.DOM.a({href:t},"Reimport all Repositories")),TaskStatusMessage({data:this.state.task_status}),n)}}),ScmRepo=React.createClass({displayName:"ScmRepo",render:function(){var e="/user/projects/"+this.props.scm+"/"+this.props.data.fullname+"/show";return React.DOM.div({className:"scm_repo"},React.DOM.a({href:e},this.props.data.fullname))}}),TaskStatusMessage=React.createClass({displayName:"TaskStatusMessage",render:function(){return"running"==this.props.data?React.DOM.div(null,React.DOM.img({src:"/assets/progress.gif",alt:"work in progress"})," Import is running ... be patient and drink a soda."):React.DOM.div(null)}});