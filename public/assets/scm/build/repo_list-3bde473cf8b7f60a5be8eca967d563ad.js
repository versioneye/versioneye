var repoListInterval=0,store=[],RepoList=React.createClass({displayName:"RepoList",loadReposFromServer:function(){$.ajax({url:this.props.url,dataType:"json",success:function(t){something_changed=t.repos.length!=store.length||t.task_status!=this.state.task_status,something_changed&&(store=t.repos,this.setState({data:t.repos,list_size:t.repos.length,task_status:t.task_status})),"done"==t.task_status&&clearInterval(repoListInterval)}.bind(this),error:function(t,e,n){console.error(this.props.url,e,n.toString())}.bind(this)})},getInitialState:function(){return{data:[],text:"",list_size:0,task_status:""}},componentWillMount:function(){this.loadReposFromServer(),repoListInterval=setInterval(this.loadReposFromServer,this.props.pollInterval)},onChange:function(t){filtered=[],data=store,count=0;for(var e in data)data.hasOwnProperty(e)&&-1!=data[e].fullname.toLowerCase().indexOf(t.target.value.toLowerCase())&&(filtered[e]=data[e],count+=1);this.setState({data:filtered,list_size:count,text:t.target.value})},render:function(){var t=this.props.scm,e="/user/"+this.props.scm+"/clear",n=this.state.data.map(function(e){return ScmRepo({data:e,scm:t})});return React.DOM.div(null,React.DOM.div(null,React.DOM.input({type:"text",id:"filter_input",value:this.state.text,onChange:this.onChange})),React.DOM.div({className:"scm_meta"},this.state.list_size," Repositories - ",React.DOM.a({href:e},"Reimport all Repositories")),TaskStatusMessage({data:this.state.task_status}),n)}}),ScmRepo=React.createClass({displayName:"ScmRepo",render:function(){var t="/user/projects/"+this.props.scm+"/"+this.props.data.fullname+"/show";return React.DOM.div({className:"scm_repo"},React.DOM.a({href:t},this.props.data.fullname))}}),TaskStatusMessage=React.createClass({displayName:"TaskStatusMessage",render:function(){return"running"==this.props.data?React.DOM.div(null,React.DOM.img({src:"/assets/progress.gif",alt:"work in progress"})," Import is running ... be patient and drink a soda."):React.DOM.div(null)}});