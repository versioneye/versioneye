function stripeResponseHandler(e,t){var n=jQuery("#payment-form");if(t.error)alert(t.error.message),n.find("button").prop("disabled",!1);else{var r=t.id;n.append("<input type='hidden' name='stripeToken' value='"+r+"'/>"),n.get(0).submit()}}function confirmAction(){return confirm("Are you sure?")?!0:!1}function load_dialog_follow(e,t,n){document.getElementById("product_to_follow").innerHTML=e,setCookie("prod_key",t,1),setCookie("prod_lang",n,1),jQuery("#dialog_follow").modal({keyboard:!0}),page_view("ga_follow_dialog="+n+"/"+t)}function toggleProductFollow(e){var t=jQuery(e.currentTarget),n=t.data(),r="/package/follow.json",i="/package/unfollow.json",o=r,a="fa fa-check-square-o",s="fa fa-square-o";console.debug(n),1==n.followState&&(o=i);var u={src_hidden:"detail",product_lang:n.productLang,product_key:n.productKey},c=function(e){return 0==e.success?(console.debug("Following failed - backend issue!"),1):(console.debug("Followed:"+n.productKey),t.data("followState",!0),t.find("span.btn-title").text(" Unfollow"),void t.find("i.follow-icon").removeClass(s).addClass(a))},l=function(e){return 0==e.success?(console.debug("Unfollowing failed - backend issue!"),1):(console.debug("Unfollowed:"+n.productKey),t.data("followState",!1),t.find("i.follow-icon").removeClass(a).addClass(s),void t.find("span.btn-title").text(" Follow"))},p=function(){console.debug("Show follow  header"),t.find("i.follow-icon").addClass("fa fa-spinner")},d=function(){console.debug("Hide follow loader."),t.find("i.follow-icon").removeClass("fa fa-spinner")};p();jQuery.post(o,u).done(function(e){console.debug(e),0==n.followState?c(e):l(e)}).fail(function(){console.error("Failed")}).always(function(){d(t)})}function exchangeImage(e,t){image_path="/assets/"+t,document.getElementById(e).src=image_path}function show_versioncomment_reply(e){var t="#"+e+"_reply_form",n="#"+e+"_reply_link",r="#"+e+"_hide_link";return jQuery(t).css("display","block"),jQuery(n).css("display","none"),jQuery(r).css("display","block"),!1}function hide_versioncomment_reply(e){var t="#"+e+"_reply_form",n="#"+e+"_reply_link",r="#"+e+"_hide_link";return jQuery(t).css("display","none"),jQuery(n).css("display","block"),jQuery(r).css("display","none"),!1}function setCookie(e,t,n){var r=new Date;new_date=new Date(r.getFullYear(),r.getMonth(),r.getDate()+n),document.cookie=e+"="+t+";expires="+new_date+";path=/"}function load_dialog_mute(e,t,n){document.getElementById("mute_button_id").value=id,document.getElementById("mute_dependency_name").innerHTML=t,document.getElementById("mute_dependency_version").innerHTML=n,jQuery("#dialog_mute").modal({keyboard:!0}),page_view("ga_mute_dialog="+t+"/"+n)}function showMuteLoader(e){console.debug("Loading"),e.addClass("disabled"),e.find("i.dep-icon").addClass("fa-spinner")}function hideMuteLoader(e){console.debug("Hiding loader."),e.removeClass("disabled"),e.find("i.dep-icon").removeClass("fa-spinner")}function muteProjectDep(){jQuery("#dialog_mute").modal("hide"),id=document.getElementById("mute_button_id").value,btn=jQuery(document.getElementById(id+"_button")),muteProjectDependency(btn)}function muteProjectDependency(e){console.debug("Going to mute dependency."),showMuteLoader(e);{var t=document.getElementById("mute_message").value,n="/user/projects/"+e.data("projectId")+"/mute_dependency",r={dependency_id:e.data("dependencyId"),mute_message:t};jQuery.post(n,r).done(function(t){console.debug(t),updateColorForPD(t.dependency_id,t.outdated),e.removeClass("mute-off").addClass("mute-on"),e.find("i.dep-icon").removeClass("fa-volume-up").addClass("fa-volume-off")}).fail(function(){console.error("Failed")}).always(function(){hideMuteLoader(e)})}}function demuteProjectDependency(e){console.debug("Going to de-mute dependency"),showMuteLoader(e);{var t="/user/projects/"+e.data("projectId")+"/demute_dependency",n={dependency_id:e.data("dependencyId")};jQuery.post(t,n).done(function(t){console.debug(t),updateColorForPD(t.dependency_id,t.outdated),e.removeClass("mute-on").addClass("mute-off"),e.find("i.dep-icon").removeClass("fa-volume-off").addClass("fa-volume-up")}).fail(function(){console.error("Failed")}).always(function(){hideMuteLoader(e)})}}function toggleProjectDependencyMute(e){var t=jQuery(e.currentTarget);return t.hasClass("disabled")?console.debug("Going to ignore: Click on disabled button"):t.hasClass("mute-on")?demuteProjectDependency(t):t.hasClass("mute-off")?(id=t.data("id"),name=t.data("dependency-name"),version=t.data("dependency-version"),load_dialog_mute(id,name,version)):console.debug("Hmm, mute button misses classes. Going to ignore that"),!1}function updateColorForPD(e,t){rows=jQuery("#"+e+"__row"),rows[0].className=1==t?"flash error":"flash success"}function preventSubmit(e,t){return element=document.getElementById(e),""==element.value?(alert("The "+t+" input field can't be empty!"),!1):!0}jQuery(document).ready(function(){jQuery("#payment-form").length&&jQuery("#payment-form").submit(function(){var e=jQuery("#payment-form");return e.find("button").prop("disabled",!0),Stripe.card.createToken(e,stripeResponseHandler),!1}),jQuery("#tabs").length>0&&jQuery("#tabs").tabs(),jQuery(".github_switch").length>0&&(jQuery(".github_switch").on("switch-change",function(e,t){toggleGitHubProject(t.el,t.value)}),console.log("Github switches are registered.")),jQuery(".btn-follow-product")&&jQuery(".btn-follow-product").on("click",function(e){toggleProductFollow(e)}),jQuery("button[rel=tooltip]")&&jQuery("button[rel=tooltip]").tooltip({placement:"bottom",html:!0}),window.FB&&FB.init({appId:"230574627021570",cookie:!0,status:!0,xfbml:!0}),map_for_profile=document.getElementById("map_for_user_profile"),map_for_profile&&(path=window.location.pathname,path=path.replace("/favoritepackages",""),path=path.replace("/comments",""),jQuery.ajax({url:path+"/users_location.json"}).done(function(e){e&&initialize_profile(e.location)})),window.render_wheel&&render_wheel(),window.render_wheel_demo&&render_wheel_demo(),window.render_wheel_main&&render_wheel_main(),window.render_wheel_development&&render_wheel_development(),window.render_wheel_test&&render_wheel_test(),window.render_wheel_provided&&render_wheel_provided(),window.render_wheel_replace&&render_wheel_replace(),window.render_wheel_require_dev&&render_wheel_require_dev(),jQuery(".btn-mute-version").length>0&&jQuery(".btn-mute-version").on("click",toggleProjectDependencyMute)});