//MooTools More, <http://mootools.net/more>. Copyright (c) 2006-2008 Valerio Proietti, <http://mad4milk.net>, MIT Style License.
var Asset=new Hash({javascript:function(t,e){e=$extend({onload:$empty,document:document,check:$lambda(!0)},e);var n=new Element("script",{src:t,type:"text/javascript"}),i=e.onload.bind(n),r=e.check,o=e.document;if(delete e.onload,delete e.check,delete e.document,n.addEvents({load:i,readystatechange:function(){["loaded","complete"].contains(this.readyState)&&i()}}).setProperties(e),Browser.Engine.webkit419)var a=function(){$try(r)&&($clear(a),i())}.periodical(50);return n.inject(o.head)},css:function(t,e){return new Element("link",$merge({rel:"stylesheet",media:"screen",type:"text/css",href:t},e)).inject(document.head)},image:function(t,e){e=$merge({onload:$empty,onabort:$empty,onerror:$empty},e);var n=new Image,i=$(n)||new Element("img");return["load","abort","error"].each(function(t){var r="on"+t,o=e[r];delete e[r],n[r]=function(){n&&(i.parentNode||(i.width=n.width,i.height=n.height),n=n.onload=n.onabort=n.onerror=null,o.delay(1,i,i),i.fireEvent(t,i,1))}}),n.src=i.src=t,n&&n.complete&&n.onload.delay(1),i.setProperties(e)},images:function(t,e){e=$merge({onComplete:$empty,onProgress:$empty},e),t.push||(t=[t]);var n=[],i=0;return t.each(function(r){var o=new Asset.image(r,{onload:function(){e.onProgress.call(this,i,t.indexOf(r)),i++,i==t.length&&e.onComplete()}});n.push(o)}),new Elements(n)}});