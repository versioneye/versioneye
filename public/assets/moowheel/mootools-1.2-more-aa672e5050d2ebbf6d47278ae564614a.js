//MooTools More, <http://mootools.net/more>. Copyright (c) 2006-2008 Valerio Proietti, <http://mad4milk.net>, MIT Style License.
var Asset=new Hash({javascript:function(e,t){t=$extend({onload:$empty,document:document,check:$lambda(!0)},t);var n=new Element("script",{src:e,type:"text/javascript"}),i=t.onload.bind(n),r=t.check,a=t.document;if(delete t.onload,delete t.check,delete t.document,n.addEvents({load:i,readystatechange:function(){["loaded","complete"].contains(this.readyState)&&i()}}).setProperties(t),Browser.Engine.webkit419)var s=function(){$try(r)&&($clear(s),i())}.periodical(50);return n.inject(a.head)},css:function(e,t){return new Element("link",$merge({rel:"stylesheet",media:"screen",type:"text/css",href:e},t)).inject(document.head)},image:function(e,t){t=$merge({onload:$empty,onabort:$empty,onerror:$empty},t);var n=new Image,i=$(n)||new Element("img");return["load","abort","error"].each(function(e){var r="on"+e,a=t[r];delete t[r],n[r]=function(){n&&(i.parentNode||(i.width=n.width,i.height=n.height),n=n.onload=n.onabort=n.onerror=null,a.delay(1,i,i),i.fireEvent(e,i,1))}}),n.src=i.src=e,n&&n.complete&&n.onload.delay(1),i.setProperties(t)},images:function(e,t){t=$merge({onComplete:$empty,onProgress:$empty},t),e.push||(e=[e]);var n=[],i=0;return e.each(function(r){var a=new Asset.image(r,{onload:function(){t.onProgress.call(this,i,e.indexOf(r)),i++,i==e.length&&t.onComplete()}});n.push(a)}),new Elements(n)}});